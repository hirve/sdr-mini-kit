#define FILTER_0_TO_20_30_OF_192KS_N 43

typedef struct {
  double history[FILTER_0_TO_20_30_OF_192KS_N];
  unsigned int last_index;
} Filter_0to20_30of192ks;

static double filter_0to20_30of192ks_taps[FILTER_0_TO_20_30_OF_192KS_N] = {
  0.001761310743293922,
  0.0036975564110974263,
  0.005349195900675562,
  0.004874519057288677,
  0.001004894741390559,
  -0.005792949690613429,
  -0.012722937222291564,
  -0.015535477720437804,
  -0.010889206483163492,
  0.0009390834945937146,
  0.01480534106583839,
  0.02231726143690381,
  0.01622265031220711,
  -0.004417597683194702,
  -0.03133349430477514,
  -0.048842349312885544,
  -0.040436778100512154,
  0.0025744762656130077,
  0.07480384328194367,
  0.15667999932578186,
  0.22137503828298308,
  0.24593853581091765,
  0.22137503828298308,
  0.15667999932578186,
  0.07480384328194367,
  0.0025744762656130077,
  -0.040436778100512154,
  -0.048842349312885544,
  -0.03133349430477514,
  -0.004417597683194702,
  0.01622265031220711,
  0.02231726143690381,
  0.01480534106583839,
  0.0009390834945937146,
  -0.010889206483163492,
  -0.015535477720437804,
  -0.012722937222291564,
  -0.005792949690613429,
  0.001004894741390559,
  0.004874519057288677,
  0.005349195900675562,
  0.0036975564110974263,
  0.001761310743293922
};

void filter_0to20_30of192ks_init(Filter_0to20_30of192ks* f) {
    int i;
    for(i = 0; i < FILTER_0_TO_20_30_OF_192KS_N; ++i)
        f->history[i] = 0;
    f->last_index = 0;
}

double filter_0to20_30of192ks(Filter_0to20_30of192ks* f, double input) {
  f->history[f->last_index++] = input;
  if(f->last_index == FILTER_0_TO_20_30_OF_192KS_N)
    f->last_index = 0;
  double acc = 0;
  int index = f->last_index, i;
  for(i = 0; i < FILTER_0_TO_20_30_OF_192KS_N; ++i) {
    index = index != 0 ? index - 1 : FILTER_0_TO_20_30_OF_192KS_N - 1;
    acc += f->history[index] * filter_0to20_30of192ks_taps[i];
  };
  return acc;
}
